@inherits Umbraco.Web.Mvc.UmbracoTemplatePage<IPublishedContent>
@{
    IEnumerable<IPublishedContent> highlights = null;
}
<link href="~/Content/css/benefits.css" rel="stylesheet" />
@if (Model.Content.DocumentTypeAlias == "Highlights")
{
    highlights = Model.Content.Descendants("HighlightItem").Where("Visible");
    if (highlights.Any())
    {
        var gridCol = 12 / highlights.Count();
        
        <div class="grid-row">
            <!-- benefits -->
            <ul class="grid cs-style-3">
                @foreach (IPublishedContent highlightItem in highlights)
                {
                    var url = string.IsNullOrEmpty(highlightItem.GetPropertyValue("relatedTo") as string)
                                ? "/underconstruction"
                                : Umbraco.TypedContent(highlightItem.GetPropertyValue<int>("relatedTo")).Url;
                    var alt = highlightItem.GetPropertyValue<string>("thumbnailImageAltValue") ?? string.Empty;
                    <li class="grid-col grid-col-@gridCol">
                        <figure class="cs-hover">
                            <img alt="@alt" src="@Umbraco.TypedContent(highlightItem.Id).GetCropUrl("thumbnail", "thumb")">

                            <a href="@url">
                                <figcaption>
                                    <h3>@highlightItem.GetPropertyValue("heading")</h3>
                                </figcaption>
                            </a>
                        </figure>
                        <p></p>
                    </li>
                }
            </ul>
        </div>
    }
}