@using Umbraco.Core.Models
@inherits Umbraco.Web.Mvc.UmbracoViewPage<Umbraco.Web.Models.RenderModel>
@{
    Layout = "/Views/Shared/_Layout.cshtml";
    ViewBag.ShowTitleBar = false;
    var homeData = uQuery.GetNodesByType("HomeData");
}

@if (homeData.Any())
{
    var highlights = homeData.First().ChildrenAsList.Where(data => data.NodeTypeAlias == "Highlights");
    if (highlights.Any())
    {
        //var highlightsContent = Umbraco.TypedContent(highlights.First().Id);
    @section HighlightsSection {
        @Html.Partial("_HighlightsPartial", highlights.First())
    }
    }

    var featured = homeData.First().ChildrenAsList.Where(data => data.NodeTypeAlias == "Featured");
    if (featured.Any())
    {
        //var featuredContent = Umbraco.TypedContent(featured.First().Id);
    @section FeaturedSection {
        @Html.Partial("_FeaturesPartial", featured.First())
    }
    }
    
    <div class="vc_row-fluid beautify">
        @Html.Partial("_ContentPartial", Umbraco.TypedContent(homeData.First().Id).Children().FirstOrDefault(c => c.DocumentTypeAlias.Equals("index", StringComparison.InvariantCultureIgnoreCase) && c.IsVisible()))
    </div>
}
